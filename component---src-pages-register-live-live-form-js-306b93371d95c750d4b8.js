(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{K9PU:function(e,a,t){"use strict";t.r(a);var n=t("HaE+"),r=(t("zLVn"),t("o0o1")),l=t.n(r),s=t("q1tI"),c=t.n(s),i=t("/MKj"),o=t("c09o"),u=(t("ofer"),t("Ji2X")),m=t("r9w1"),d=t("PsDL"),f=t("Z3vd"),b=t("VmPI"),p=t("iae6"),g=t("7frF"),h=t.n(g),v=t("CRf/"),y=t.n(v),E=t("WlAH"),w=t("+bXu"),P=(t("ZiQX"),t("J5ja")),N=t("CGSa"),j=t("/RtB"),O=t("2Mjm"),S=t("KYPV"),x=t("UGp+"),k=t("jBtN"),C=t("nfo/"),I=t("w2x5"),R=t("9kay"),B=/(\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{4,20}$/im,A=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z!@#$%^&*()_,.?":{}|<>\d]{8,20}$/;a.default=Object(R.b)()(Object(i.b)((function(e){return{language:e.language}}),{})((function(e){var a=e.t,t=x.b({firstName:x.d("Enter a first name").required(a("First name is required")),lastName:x.d("Enter a last name").required(a("Last name is required")),countryResidency:x.d("Select your country of residence").required(a("Country of residence is required")),city:x.d("Enter City"),phone:x.d("Enter your Phone").required(a("Phone is required")).matches(B,a("Phone number is not valid")),email:x.d("Enter your email").required(a("Email is required")).email(a("Enter a valid email")).test("email-availability",a("Account already exists with this email, Kindly login"),function(){var e=Object(n.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())){e.next=6;break}return e.next=4,Object(I.b)({email:a.toLowerCase()});case 4:return t=e.sent,e.abrupt("return",t.result.availability);case 6:return e.abrupt("return",!1);case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}()),portalPassword:x.d("").min(8,a("Password must contain atleast 8 characters")).max(20,a("Password should not be more than 20 characters long")).matches(A,a("Atleast one lower case, upper case and number required")).required(a("Enter your password")),portalPasswordConfirm:x.d("").oneOf([x.c("portalPassword"),null],"Passwords must match").required(a("Enter confirm password")),emailPin:x.d("").required(a("PIN must be entered")).length(6,a("Pin should be 6 characters exact")),tos:x.a().oneOf([!0],a("Accept Terms & Conditions is required"))}),r=(e.history,e.language),i=Object(s.useState)(!0),o=i[0],u=i[1],m=Object(s.useState)(!1),d=m[0],f=m[1],b=Object(s.useState)(!1),p=(b[0],b[1]),g=Object(s.useState)(!1),h=(g[0],g[1]),v=Object(s.useState)(!1),y=v[0],w=v[1],P=Object(s.useState)(!1),N=P[0],j=P[1],O=Object(s.useState)(!1),R=O[0],q=O[1],T=Object(s.useState)(!1),F=T[0],z=T[1];Object(s.useEffect)((function(){var e=new URLSearchParams(window.location.search),a=e.get("ibRef"),t=e.get("ibId"),n=e.get("ref"),r=e.get("utm-campaign");a&&(w(a),localStorage.setItem("partnerId",a)),t&&(j(t),localStorage.setItem("ibId",t)),n&&(q(n),localStorage.setItem("referral",n)),r&&(z(r),localStorage.setItem("utm",r))}),[]);var W=function(){var e=Object(n.a)(l.a.mark((function e(a){var t,n,s,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!1),f(!0),t=localStorage.getItem("partnerId"),n=localStorage.getItem("ibId"),y?a.ibRef=y:t&&(a.ibRef=t),N?a.ibId=N:n&&(a.ibId=n),e.prev=6,s=localStorage.getItem("referral"),a.referral=R||(s||null),c=localStorage.getItem("utm"),a.utmCampaign=F||(c||null),a.language=E.c.languages.find((function(e){return e.key===r})).key1,a.countryCode=Object(k.c)(a.countryResidency),e.next=15,Object(I.f)(a);case 15:i=e.sent,f(!1),i.isSuccess?(p(!0),window.location.replace(C.b+"?token="+i.result)):(h(!0),u(!0)),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(6),h(!0),u(!0),f(!1);case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(a){return e.apply(this,arguments)}}(),M={firstName:"",lastName:"",countryResidency:"United Arab Emirates",phone:"+971",email:"",portalPassword:"",portalPasswordConfirm:"",emailPin:"",declarations:["By clicking here I give my consent for Accuindex to contact me for marketing purposes. You can opt out at any time. For further details please see ourMarketing and Communication Policy Statement."],tos:!1,language:"en-us"===r?"en-gb":r},V=Object(s.useState)(M),Z=V[0],H=V[1],J=function(){var e=Object(n.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(I.c)();case 3:a=e.sent,H(Object.assign({},Z,{countryResidency:Object(k.b)(a.country||"AE")})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Locate Error",e.t0),H(Object.assign({},Z,{countryResidency:Object(k.b)("AE")}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){J()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{enableReinitialize:!0,validateOnMount:!1,validateOnChange:!0,validate:!1,validateOnBlur:!0,initialValues:Z,validationSchema:t,onSubmit:W},(function(e){return c.a.createElement(L,Object.assign({activeSubmit:o,isLoading:d,language:r},e))})))})));var L=Object(R.b)()((function(e){var a,t=e.values,r=t.firstName,i=t.lastName,g=t.countryResidency,v=(t.city,t.phone),S=t.email,x=t.portalPassword,C=t.portalPasswordConfirm,R=t.emailPin,B=(t.declarations,t.tos),A=e.errors,L=e.touched,q=e.handleSubmit,T=e.handleChange,F=e.setFieldTouched,z=e.setFieldValue,W=e.activeSubmit,M=(e.isLoading,e.language),V=e.t,Z=Object(k.e)(),H=Object(s.useState)(!1),J=H[0],K=H[1],U=Object(s.useState)(!1),Y=U[0],$=U[1],X=Object(s.useState)(!1),_=X[0],G=X[1],D=Object(s.useState)(V("Send PIN")),Q=D[0],ee=D[1],ae=Object(s.useState)(c.a.createElement(P.a,null)),te=ae[0],ne=ae[1],re=Object(s.useRef)(),le=Object(s.useRef)(),se=function(){var e=Object(n.a)(l.a.mark((function e(a){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(V("Sending")),ne(c.a.createElement(N.a,null)),e.prev=2,t=E.c.languages.find((function(e){return e.key==M})).key1,e.next=6,Object(I.a)({email:S,language:t});case 6:e.sent.isSuccess&&(K(!0),ee(V("Enter PIN")),ne(c.a.createElement(j.a,null))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),K(!1),ee(V("Send PIN")),ne(c.a.createElement(P.a,null));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(a){return e.apply(this,arguments)}}(),ce=function(){var e=Object(n.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),ee(V("Verifying")),ne(c.a.createElement(N.a,null)),e.prev=3,e.next=6,Object(I.g)({email:S,value:R});case 6:e.sent.isSuccess&&($(!1),G(!0),ee(V("PIN Verified")),ne(c.a.createElement(O.a,null)),!0),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(3),$(!1),ee(V("Enter PIN")),ne(c.a.createElement(j.a,null)),A.emailPin=V("PIN not verified"),F(V("emailPin"));case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){var e;switch(M){case"ar-ae":e="ar";break;case"ja-jp":e="jp";break;case"zh-cn":e="ch";break;case"es-es":e="es";break;case"so-kr":e="so";break;case"fa-ir":e="fa";break;case"ru":e="ru";break;case"en-us":default:e="en"}o.a.changeLanguage(e)}),[M]),Object(s.useEffect)((function(){K(!1),ee(V("Send PIN")),ne(c.a.createElement(P.a,null))}),[S]),Object(s.useEffect)((function(){J&&le.current.focus()}),[J]),Object(s.useEffect)((function(){6===R.length&&ce()}),[R]),Object(s.useEffect)((function(){var e=k.a.find((function(e){return e.country===g}));e&&z("phone","+"+e.calling_code)}),[g]);var ie=function(e){F(e)},oe=Object(s.useState)(!1),ue=oe[0],me=oe[1],de=Object(s.useState)(!1),fe=de[0],be=de[1];return c.a.createElement(u.a,{className:"ar-ae"===M?"dir-ar-ae":""},c.a.createElement("form",{onSubmit:q},c.a.createElement(m.a,{variant:"standard",className:"mb-4",name:"firstName",helperText:L.firstName?A.firstName:"",error:!!L.firstName&&Boolean(A.firstName),label:V("First Name"),value:r,onChange:function(e){F(e.target.name),T(e)},onBlur:function(){ie("firstName")},fullWidth:!0}),c.a.createElement(m.a,((a={variant:"standard",className:"mb-4",name:"lastName",helperText:L.lastName?A.lastName:"",error:!!L.lastName&&Boolean(A.lastName),label:V("Last Name"),value:i,onChange:T,onBlur:T}).onBlur=function(){ie("lastName")},a.fullWidth=!0,a)),c.a.createElement(w.a,{id:"country",className:"mb-2",options:Z,fullWidth:!0,autoHighlight:!0,blurOnSelect:!0,value:Object(k.d)(g),onChange:function(e,a){z("countryResidency",a?a.countryEn:"")},getOptionLabel:function(e){return"ar-ae"===M?e.countryAr:e.countryEn},renderOption:function(e){return c.a.createElement(c.a.Fragment,null,"ar-ae"===M?e.countryAr:e.countryEn)},renderInput:function(e){return c.a.createElement(m.a,Object.assign({},e,{label:V("Country of Residence"),name:"countryResidency",value:g,helperText:L.countryResidency?A.countryResidency:"",error:!!L.countryResidency&&Boolean(A.countryResidency),onBlur:function(){ie("countryResidency")},variant:"standard"}))}}),c.a.createElement(m.a,{variant:"standard",className:"mb-4",name:"phone",inputRef:re,onBlur:function(){ie("phone")},helperText:L.phone?A.phone:"",error:!!L.phone&&Boolean(A.phone),label:V("Phone"),fullWidth:!0,value:v,onChange:T,inputProps:{className:"dir-ltr"}}),c.a.createElement(m.a,{variant:"standard",className:"mb-4",name:"email",helperText:L.email?A.email:"",error:!!L.email&&Boolean(A.email),label:V("Email"),onBlur:function(){ie("email")},fullWidth:!0,value:S,onChange:T}),c.a.createElement(m.a,{variant:"standard",className:"mb-2",name:"portalPassword",onBlur:function(){ie("portalPassword")},helperText:L.portalPassword?A.portalPassword:"",error:!!L.portalPassword&&Boolean(A.portalPassword),label:V("Password"),fullWidth:!0,type:ue?"text":"password",value:x,onChange:T,InputProps:{endAdornment:c.a.createElement(d.a,{"aria-label":"toggle password visibility",onClick:function(){me(!ue)}},ue?c.a.createElement(h.a,null):c.a.createElement(y.a,null))}}),c.a.createElement(m.a,{variant:"standard",className:"mb-2",name:"portalPasswordConfirm",onBlur:function(){ie("portalPasswordConfirm")},helperText:L.portalPasswordConfirm?A.portalPasswordConfirm:"",error:!!L.portalPasswordConfirm&&Boolean(A.portalPasswordConfirm),label:V("Confirm Password"),fullWidth:!0,type:fe?"text":"password",value:C,onChange:T,InputProps:{endAdornment:c.a.createElement(d.a,{"aria-label":"toggle password visibility",onClick:function(){be(!fe)}},fe?c.a.createElement(h.a,null):c.a.createElement(y.a,null))}}),c.a.createElement("div",{className:"mb-4"},c.a.createElement("div",{className:"badge badge-pill badge-info mr-1"},V("8-20 characters")),c.a.createElement("div",{className:"badge badge-pill badge-info mr-1"},V("Latin Letters")),c.a.createElement("div",{className:"badge badge-pill badge-info mr-1"},V("Numbers"))),c.a.createElement("div",{className:"d-flex align-items-center justify-content-start"},c.a.createElement(f.a,{className:"btn-warning mb-4",disabled:Boolean(A.email)||J,endIcon:te,onClick:se},V(Q)),c.a.createElement(m.a,{variant:"standard",className:"mb-4 mx-3",inputRef:le,label:V("Enter PIN"),helperText:L.emailPin?A.emailPin:"",error:!!L.emailPin&&Boolean(A.emailPin),value:R,onChange:T,name:"emailPin",disabled:!J||Y||_})),J&&c.a.createElement("div",{className:"MuiFormHelperText-root mb-4 text-center text-danger"},V("PIN sent to your email, please verify")),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement(b.a,{checked:B,onChange:T,name:"tos",id:"tos",value:"true",className:"align-self-start p-0 mx-2",color:"default"}),c.a.createElement("div",{className:"mb-4"},c.a.createElement("p",null,V("By clicking here I give my consent for"),"  ",c.a.createElement("b",null,V("Bank al Ethiha")),"  ",V("to contact me for marketing purposes, You can opt out at any time, For further details please see our"),c.a.createElement("a",{href:"https://exiniti.blob.core.windows.net/public/Accuindex-Limited-Privacy-Notice.pdf",target:"_blank",rel:"noopener noreferrer",className:"link"},V("Marketing and Communication Policy Statement")),"."),c.a.createElement("p",{className:"MuiFormHelperText-root Mui-error",style:{color:"red",fontSize:"small"}},L.emailPin&&A.tos&&V("You must tick the consent form")))),c.a.createElement("div",{className:"text-center"},c.a.createElement(f.a,{style:{minWidth:"8rem"},type:"submit",size:"large",className:"btn-success",disabled:!W||e.isLoading},e.isLoading?c.a.createElement(p.a,{size:20}):V("Register Now")))))}))}}]);
//# sourceMappingURL=component---src-pages-register-live-live-form-js-306b93371d95c750d4b8.js.map